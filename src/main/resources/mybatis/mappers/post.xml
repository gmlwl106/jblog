<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="post">

	<!-- 글 추가하기 -->
	<insert id="insert" parameterType="postVo">
		<![CDATA[
			insert into post
			values(seq_post_no.nextval, #{cateNo}, #{postTitle}, #{postContent}, sysdate)
		]]>
	</insert>
	
	<!-- (블로그메인) 글 제목 가져오기 -->
	<select id="getList" parameterType="String" resultType="postVo">
		select  postNo
		        ,p.cateNo
		        ,postTitle
		        ,to_char(p.regDate, 'YYYY/MM/DD') regDate
		from blog b, category c, post p
		where b.id = c.id
		and c.cateNo = p.cateNo
		and b.id = #{id}
		order by p.regDate desc
	</select>
	
	<!-- (블로그메인) 글 1개 가져오기 -->
	<select id="getPost" parameterType="String" resultType="postVo">
		select postNo
		        ,postTitle
		        ,postContent
		        ,to_char(regDate, 'YYYY/MM/DD') regDate
		from post
		where regDate = (select max(p.regDate)
		                from post p, category c
		                where c.cateNo = p.cateNo
		                and c.id = #{id})
	</select>
</mapper>